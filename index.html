html
<!DOCTYPE html> 
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Суп Дня</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React и ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel для JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@400;600;800&family=Caveat:wght@700&family=Russo+One&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'Space Mono', monospace; }
        .font-handwriting { font-family: 'Caveat', cursive; }
        .font-russo { font-family: 'Russo One', sans-serif; }
        
        .animate-spin-slow { animation: spin 3s linear infinite; }
        .animate-spin-fast { animation: spin 0.5s linear infinite; }
        .animate-spin-reverse { animation: spin 0.5s linear infinite reverse; }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        @keyframes spectrum {
          0%, 100% { height: 10%; }
          50% { height: 90%; }
        }
        
        /* Текстура шлифованного металла */
        .brushed-metal {
          background-color: #3a3a3a;
          background-image: 
            repeating-linear-gradient(90deg, transparent 0, transparent 2px, rgba(0,0,0,0.1) 2px, rgba(0,0,0,0.1) 4px),
            linear-gradient(to bottom, #666 0%, #444 50%, #222 100%);
          box-shadow: inset 0 1px 0 rgba(255,255,255,0.3), 0 20px 40px rgba(0,0,0,0.8);
        }
        
        /* Текстура деревянной полки */
        .wood-shelf {
            background-color: #5d4037;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%233e2723' fill-opacity='0.2' fill-rule='evenodd'%3E%3Cpath d='M0 0h20v20H0V0zm10 10h10v10H10V10zM0 10h10v10H0V10zM10 0h10v10H10V0z'/%3E%3C/g%3E%3C/svg%3E"), linear-gradient(180deg, #8d6e63 0%, #4e342e 100%);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Эффект шума для пластика */
        .noise-texture {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
        }
    </style>
</head>
<body class="bg-[#121212] text-neutral-200 min-h-screen flex flex-col items-center p-4 md:p-8 selection:bg-orange-500/50 overflow-x-hidden">
    <div id="root" class="w-full flex flex-col items-center"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Иконки (SVG) ---
        const Icon = ({ path, size = 24, className = "", fill = "none" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Play = (p) => <Icon {...p} fill="currentColor" path={<polygon points="5 3 19 12 5 21 5 3"></polygon>} />;
        const Pause = (p) => <Icon {...p} fill="currentColor" path={<><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></>} />;
        const SkipForward = (p) => <Icon {...p} fill="currentColor" path={<><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></>} />;
        const SkipBack = (p) => <Icon {...p} fill="currentColor" path={<><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></>} />;
        
        // Новые иконки перемотки
        const FastForwardIcon = (p) => <Icon {...p} fill="currentColor" path={<><polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon></>} />;
        const RewindIcon = (p) => <Icon {...p} fill="currentColor" path={<><polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon></>} />;

        const Volume2 = (p) => <Icon {...p} path={<><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></>} />;
        const BatteryMedium = (p) => <Icon {...p} path={<><rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line><line x1="5" y1="10" x2="5" y2="14"></line><line x1="9" y1="10" x2="9" y2="14"></line><line x1="13" y1="10" x2="13" y2="14"></line></>} />;
        const Music2 = (p) => <Icon {...p} path={<><circle cx="8" cy="18" r="4"></circle><path d="M12 18V2l7 4"></path></>} />;
        const ChevronLeft = (p) => <Icon {...p} path={<polyline points="15 18 9 12 15 6"></polyline>} />;
        const ChevronRight = (p) => <Icon {...p} path={<polyline points="9 18 15 12 9 6"></polyline>} />;
        const SoupIcon = (p) => <Icon {...p} path={<><path d="M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z"/><path d="M10 8c1.5-1.5 2-3.5 1-5"/><path d="M14 8c1.5-1.5 2-3.5 1-5"/></>} />;

        // --- Визуальные компоненты ---

        const Cassette = ({ soup, isActive, isSoupOfTheDay, onClick, seekState }) => {
            const coverColor = soup.coverColor || "bg-indigo-400";
            const labelTitle = soup.playlistTitle || soup.title || soup.id;
            
            // Определяем анимацию вращения в зависимости от состояния перемотки
            let spinClass = "";
            if (isActive) {
                if (seekState === 'forward') spinClass = "animate-spin-fast";
                else if (seekState === 'rewind') spinClass = "animate-spin-reverse";
                else spinClass = "animate-spin-slow";
            }

            return (
                <div
                    onClick={() => onClick(soup)}
                    className={`
                        relative w-64 h-40 flex-shrink-0 rounded-lg border-[4px] cursor-pointer transition-all duration-300 transform-gpu group
                        ${isActive 
                            ? "border-orange-600/90 scale-[1.02] shadow-[0_20px_40px_rgba(234,88,12,0.3)] z-10" 
                            : "border-neutral-600 hover:scale-105 hover:shadow-[0_15px_30px_rgba(0,0,0,0.6)] hover:border-neutral-400"
                        }
                        bg-[#222] select-none overflow-hidden
                    `}
                >
                    {/* Texture Overlay */}
                    <div className="absolute inset-0 noise-texture pointer-events-none z-0"></div>
                    
                    {/* Винты */}
                    {[
                        "top-1.5 left-1.5 rotate-45", "top-1.5 right-1.5 -rotate-45", 
                        "bottom-1.5 left-1.5 -rotate-45", "bottom-1.5 right-1.5 rotate-45"
                    ].map((pos, i) => (
                        <div key={i} className={`absolute ${pos} w-2.5 h-2.5 rounded-full bg-[#888] shadow-[inset_1px_1px_1px_rgba(0,0,0,0.9),0_1px_1px_rgba(255,255,255,0.4)] border border-[#555] flex items-center justify-center z-20`}>
                            <div className="w-1.5 h-0.5 bg-[#333]"></div>
                        </div>
                    ))}

                    {/* Наклейка кассеты */}
                    <div className="absolute inset-[10px] bg-[#e0e0e0] rounded-sm flex flex-col items-center border border-neutral-400 shadow-[inset_0_0_15px_rgba(0,0,0,0.1)] overflow-hidden z-10">
                        {/* Верхняя часть наклейки */}
                        <div className="w-full h-12 bg-[#f4f1ea] flex items-center px-3 border-b-2 border-neutral-300 gap-3 relative">
                            <div className={`w-9 h-9 rounded shadow-sm flex items-center justify-center border border-black/10 flex-shrink-0 ${coverColor}`}>
                                <Music2 size={16} className="text-white/90" />
                            </div>
                            <div className="flex flex-col flex-1 min-w-0">
                                <span className="font-handwriting text-lg font-bold text-[#222] truncate leading-none pt-1">
                                    {labelTitle}
                                </span>
                                <span className="font-mono text-[8px] text-[#666] uppercase tracking-widest">
                                    {isSoupOfTheDay ? "★ Суп Дня ★" : "Audio Cassette"}
                                </span>
                            </div>
                        </div>

                        {/* Окно пленки */}
                        <div className="flex-1 w-full flex items-center justify-center relative bg-[#333] px-2 py-1">
                            <div className="w-full h-full bg-transparent rounded-sm border-2 border-neutral-500/50 relative overflow-hidden flex items-center justify-between px-5 shadow-[inset_0_0_8px_black]">
                                {/* Левая бобина */}
                                <div className={`w-9 h-9 rounded-full bg-white border-[3px] border-[#ccc] flex items-center justify-center shadow-md ${spinClass}`}>
                                    <div className="w-full h-1 bg-[#ccc] absolute"></div>
                                    <div className="h-full w-1 bg-[#ccc] absolute"></div>
                                </div>

                                {/* Пленка посередине */}
                                <div className="flex-1 h-6 bg-[#1a0f0a] mx-2 rounded relative overflow-hidden border-t border-b border-[#4e342e]">
                                     <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent skew-x-12"></div>
                                </div>

                                {/* Правая бобина */}
                                <div className={`w-9 h-9 rounded-full bg-white border-[3px] border-[#ccc] flex items-center justify-center shadow-md ${spinClass}`}>
                                    <div className="w-full h-1 bg-[#ccc] absolute"></div>
                                    <div className="h-full w-1 bg-[#ccc] absolute"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const SpeakerGrille = () => (
            <div className="w-full h-full p-4 relative overflow-hidden rounded-[1.5rem] border-[6px] border-[#222] shadow-[inset_2px_2px_10px_rgba(0,0,0,0.8),1px_1px_0px_rgba(255,255,255,0.1)] bg-[#1a1a1a] group">
                {/* Сетка */}
                <div className="absolute inset-0 opacity-80"
                    style={{
                        backgroundImage: `radial-gradient(circle at center, #000 1.5px, transparent 1.5px)`,
                        backgroundSize: "4px 4px"
                    }}
                ></div>
                
                {/* Блик */}
                <div className="absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent pointer-events-none"></div>

                {/* Шильдик "Суп Дня" */}
                <div className="absolute bottom-6 right-6 z-10">
                     <div className="bg-gradient-to-b from-orange-600 to-orange-800 text-orange-100 text-[10px] font-russo uppercase tracking-widest px-3 py-1 rounded shadow-[0_2px_4px_rgba(0,0,0,0.8),inset_0_1px_0_rgba(255,255,255,0.3)] border border-orange-900 flex items-center gap-2 transform group-hover:scale-105 transition-transform">
                        <SoupIcon size={14} className="text-orange-200" />
                        <span className="drop-shadow-sm">СУП ДНЯ</span>
                    </div>
                </div>
            </div>
        );

        const SpectrumVisualizer = ({ analyser, isPlaying }) => {
            const canvasRef = useRef(null);

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas || !analyser) return;
                const ctx = canvas.getContext("2d");
                let animationId;
                const bufferLength = analyser.frequencyBinCount;
                const dataArray = new Uint8Array(bufferLength);

                const draw = () => {
                    animationId = requestAnimationFrame(draw);
                    const width = canvas.width;
                    const height = canvas.height;
                    ctx.clearRect(0, 0, width, height);

                    if (!isPlaying) {
                        ctx.fillStyle = "#1f2937";
                        ctx.fillRect(0, height - 2, width, 2);
                        return;
                    }

                    analyser.getByteFrequencyData(dataArray);
                    const barWidth = (width / bufferLength) * 2.5;
                    let x = 0;

                    for (let i = 0; i < bufferLength; i++) {
                        const barHeight = (dataArray[i] / 255) * height;
                        
                        // Градиент для столбиков
                        const gradient = ctx.createLinearGradient(0, height - barHeight, 0, height);
                        gradient.addColorStop(0, '#34d399'); // Emerald 400
                        gradient.addColorStop(1, '#059669'); // Emerald 600

                        ctx.fillStyle = gradient;
                        ctx.fillRect(x, height - barHeight, barWidth, barHeight);
                        x += barWidth + 1;
                    }
                };
                draw();
                return () => cancelAnimationFrame(animationId);
            }, [analyser, isPlaying]);

            return (
                <div className="flex items-stretch h-12 bg-[#05100c] p-1 rounded border border-white/10 shadow-[inset_0_2px_5px_black]">
                    <canvas ref={canvasRef} width={160} height={40} className="w-full h-full opacity-90" />
                </div>
            );
        };

        const ControlButton = ({ children, onClick, onMouseDown, onMouseUp, onMouseLeave, isActive, className = "", title }) => (
            <button
                onClick={onClick}
                onMouseDown={onMouseDown}
                onMouseUp={onMouseUp}
                onMouseLeave={onMouseLeave}
                title={title}
                className={`
                    relative flex items-center justify-center rounded-lg transition-all active:scale-[0.96] active:translate-y-0.5
                    bg-gradient-to-b from-[#444] to-[#222] 
                    border-t border-l border-[#555] border-b-4 border-r-4 border-[#111]
                    shadow-[0_4px_6px_rgba(0,0,0,0.6)]
                    active:border-b-0 active:border-r-0 active:border-t-2 active:border-l-2 active:border-[#111] active:shadow-inner
                    group
                    ${className}
                `}
            >
                <div className={`text-neutral-400 group-hover:text-white transition-colors z-10 ${isActive ? "text-orange-400 drop-shadow-[0_0_5px_rgba(251,146,60,0.6)]" : ""}`}>
                    {children}
                </div>
            </button>
        );

        function App() {
            const [soups, setSoups] = useState([]);
            const [currentSoupId, setCurrentSoupId] = useState(null);
            const [currentTrackIndex, setCurrentTrackIndex] = useState(0);
            const [isPlaying, setIsPlaying] = useState(false);
            const [progress, setProgress] = useState(0); 
            const [volume, setVolume] = useState(70);
            
            // Состояние перемотки для визуализации: 'idle', 'forward', 'rewind'
            const [seekState, setSeekState] = useState('idle');

            const audioRef = useRef(null);
            const scrollContainerRef = useRef(null);
            const audioContextRef = useRef(null);
            const analyserNodeRef = useRef(null);
            const [analyserNode, setAnalyserNode] = useState(null);
            const rewindIntervalRef = useRef(null);

            const [todayInfo] = useState(() => ({ dayIndex: new Date().getDay() }));
            const dayNames = ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"];
            const effectiveDayIndex = todayInfo.dayIndex;

            const currentSoup = soups.find((s) => s.id === currentSoupId) || null;
            const currentTrack = currentSoup && currentSoup.tracks ? currentSoup.tracks[currentTrackIndex] : null;

            // Init Web Audio
            useEffect(() => {
                const audio = audioRef.current;
                if (!audio) return;
                const AudioContextClass = window.AudioContext || window.webkitAudioContext;
                if (!AudioContextClass) return;
                
                const ctx = new AudioContextClass();
                const source = ctx.createMediaElementSource(audio);
                const analyser = ctx.createAnalyser();
                analyser.fftSize = 64;
                source.connect(analyser);
                analyser.connect(ctx.destination);
                
                audioContextRef.current = ctx;
                setAnalyserNode(analyser);
                return () => ctx.close();
            }, []);

            // Load Soups
            useEffect(() => {
                async function load() {
                    try {
                        const res = await fetch("soups/index.json");
                        const data = await res.json();
                        const list = (data.soups || []).map((s, idx) => ({ ...s, tracks: [], tracksLoaded: false }));
                        setSoups(list);
                    } catch (e) { console.error(e); }
                }
                load();
            }, []);

            // Auto-select day soup
            useEffect(() => {
                if (soups.length === 0 || currentSoupId) return;
                const daySoup = soups.find(s => s.type === "day" && s.dayOfWeek === effectiveDayIndex) || soups[0];
                if (daySoup) setCurrentSoupId(daySoup.id);
            }, [soups, currentSoupId, effectiveDayIndex]);

            // Load Playlist
            useEffect(() => {
                const soup = soups.find((s) => s.id === currentSoupId);
                if (!soup || soup.tracksLoaded) return;
                fetch(soup.basePath + "/playlist.json")
                    .then(r => r.json())
                    .then(data => {
                        setSoups(prev => prev.map(s => s.id === soup.id ? { ...s, tracks: data.tracks, tracksLoaded: true, playlistTitle: data.title } : s));
                    })
                    .catch(console.error);
            }, [currentSoupId, soups]);

            // Audio Source
            useEffect(() => {
                const audio = audioRef.current;
                if (!audio || !currentTrack) return;
                audio.src = currentSoup.basePath + "/" + currentTrack.file;
                audio.load();
                if(isPlaying) audio.play().catch(() => setIsPlaying(false));
            }, [currentSoupId, currentTrackIndex]);

            // Volume & Progress
            useEffect(() => {
                if (audioRef.current) audioRef.current.volume = (volume / 100) ** 2;
            }, [volume]);

            useEffect(() => {
                const audio = audioRef.current;
                const update = () => {
                    if (audio.duration) setProgress((audio.currentTime / audio.duration) * 100);
                };
                const ended = () => handleNext();
                audio.addEventListener("timeupdate", update);
                audio.addEventListener("ended", ended);
                return () => {
                    audio.removeEventListener("timeupdate", update);
                    audio.removeEventListener("ended", ended);
                };
            }, [currentSoupId]);

            // Play/Pause
            useEffect(() => {
                const audio = audioRef.current;
                if (!audio) return;
                if (isPlaying) {
                    if (audioContextRef.current?.state === "suspended") audioContextRef.current.resume();
                    audio.play().catch(() => setIsPlaying(false));
                } else {
                    audio.pause();
                }
            }, [isPlaying]);

            // Handlers
            const handleNext = () => {
                if (!currentSoup?.tracks?.length) return;
                setCurrentTrackIndex(p => (p + 1 < currentSoup.tracks.length ? p + 1 : 0));
            };
            const handlePrev = () => {
                if (!currentSoup?.tracks?.length) return;
                setCurrentTrackIndex(p => (p - 1 >= 0 ? p - 1 : currentSoup.tracks.length - 1));
            };
            const togglePlay = () => setIsPlaying(p => !p);

            // --- REAL BUTTON SEEKING LOGIC ---
            
            // Fast Forward: Удерживаем - скорость x3 (эффект)
            const startFastForward = () => {
                if(!audioRef.current) return;
                audioRef.current.playbackRate = 3.0; // Чипманки
                setSeekState('forward');
            };
            
            const stopFastForward = () => {
                if(!audioRef.current) return;
                audioRef.current.playbackRate = 1.0;
                setSeekState('idle');
            };

            // Rewind: Удерживаем - отматываем назад интервалом
            const startRewind = () => {
                if(!audioRef.current) return;
                setSeekState('rewind');
                // Отключаем звук или делаем тише во время отмотки (опционально, тут просто мотаем)
                rewindIntervalRef.current = setInterval(() => {
                    audioRef.current.currentTime = Math.max(0, audioRef.current.currentTime - 0.5); // 0.5 сек каждые 30мс
                }, 30);
            };

            const stopRewind = () => {
                if(rewindIntervalRef.current) clearInterval(rewindIntervalRef.current);
                setSeekState('idle');
            };

            const scroll = (dir) => scrollContainerRef.current?.scrollBy({ left: dir === "left" ? -300 : 300, behavior: "smooth" });

            return (
                <div className="w-full flex flex-col items-center max-w-6xl">
                    {/* Header */}
                    <div className="mb-6 text-center">
                        <h1 className="text-4xl md:text-5xl font-russo text-neutral-300 uppercase tracking-widest drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)] text-[#e5e5e5]">
                            СУП ДНЯ
                        </h1>
                        <p className="text-sm font-mono text-orange-600/80 mt-2 uppercase tracking-wide bg-black/30 inline-block px-3 py-1 rounded border border-orange-900/30">
                            {dayNames[effectiveDayIndex]} • FM STEREO
                        </p>
                    </div>

                    {/* Shelf */}
                    <div className="w-full mb-10 relative group/shelf">
                         <button onClick={() => scroll("left")} className="absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/50 text-white rounded-r hover:bg-orange-600 transition hidden md:block"><ChevronLeft /></button>
                         <button onClick={() => scroll("right")} className="absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/50 text-white rounded-l hover:bg-orange-600 transition hidden md:block"><ChevronRight /></button>
                        
                        <div className="wood-shelf rounded-lg p-6 shadow-[0_30px_60px_rgba(0,0,0,0.7),inset_0_2px_10px_rgba(0,0,0,0.5)] border-t-[4px] border-[#3e2723] relative">
                            <div className="absolute top-0 left-0 right-0 h-4 bg-gradient-to-b from-black/40 to-transparent z-10 pointer-events-none"></div>
                            
                            <div ref={scrollContainerRef} className="flex gap-6 overflow-x-auto pb-6 pt-2 px-2 no-scrollbar scroll-smooth snap-x">
                                {soups.map((soup) => (
                                    <div key={soup.id} className="snap-center transform transition-transform">
                                        <Cassette 
                                            soup={soup} 
                                            isActive={currentSoupId === soup.id} 
                                            isSoupOfTheDay={soup.type === "day" && soup.dayOfWeek === effectiveDayIndex}
                                            onClick={(s) => { setCurrentSoupId(s.id); setCurrentTrackIndex(0); setIsPlaying(true); }}
                                            seekState={currentSoupId === soup.id ? seekState : 'idle'}
                                        />
                                        {/* Тень под кассетой */}
                                        <div className="mt-2 h-2 w-[90%] mx-auto bg-black/60 blur-md rounded-[100%]"></div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Player Unit */}
                    <div className="w-full max-w-4xl brushed-metal rounded-3xl p-6 md:p-10 shadow-[0_50px_100px_black] border-t border-white/10 relative z-10 flex flex-col md:flex-row gap-8 items-stretch">
                        
                        {/* Хромированная ручка (декор) */}
                        <div className="hidden md:block absolute -top-8 left-1/2 -translate-x-1/2 w-64 h-8 bg-gradient-to-b from-[#ccc] via-[#fff] to-[#999] rounded-t-xl z-0 shadow-lg border-t border-white"></div>

                        {/* Левая часть: Колонка */}
                        <div className="w-full md:w-1/3 aspect-square flex-shrink-0">
                            <SpeakerGrille />
                        </div>

                        {/* Правая часть: Управление и Экран */}
                        <div className="flex-1 flex flex-col justify-between gap-6">
                            
                            {/* LCD Display */}
                            <div className="bg-[#1a1a1a] rounded-xl p-4 border-[6px] border-[#2a2a2a] shadow-[inset_0_5px_20px_black] relative overflow-hidden h-48 flex flex-col">
                                {/* Стекло/блики */}
                                <div className="absolute inset-0 bg-[linear-gradient(110deg,rgba(255,255,255,0.05)_0%,rgba(255,255,255,0)_20%,rgba(255,255,255,0)_100%)] pointer-events-none z-20"></div>
                                <div className="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjMDAwIiAvPgo8cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSIjMzMzIiAvPgo8L3N2Zz4=')] opacity-20 pointer-events-none z-0"></div>

                                {/* Top Status Bar */}
                                <div className="flex justify-between text-[10px] font-mono text-emerald-500/70 mb-2 relative z-10">
                                    <span className="flex items-center gap-1"><BatteryMedium size={10}/> BAT</span>
                                    <span className={isPlaying ? "animate-pulse text-emerald-400" : ""}>{isPlaying ? "PLAY" : "PAUSE"}</span>
                                </div>

                                {/* Main Info */}
                                <div className="flex-1 flex flex-col justify-center relative z-10">
                                    <h2 className="text-emerald-400 font-mono text-xl md:text-2xl truncate leading-tight drop-shadow-[0_0_5px_rgba(52,211,153,0.5)]">
                                        {currentSoup?.playlistTitle || "NO TAPE"}
                                    </h2>
                                    <p className="text-emerald-600/80 font-mono text-xs mt-1 truncate">
                                        {currentTrack ? `${currentTrackIndex + 1}. ${currentTrack.title || currentTrack.file}` : "INSERT CASSETTE"}
                                    </p>
                                </div>

                                {/* Visualizer & Mode */}
                                <div className="mt-auto flex items-end justify-between gap-4 relative z-10">
                                    <div className="text-[9px] font-mono text-emerald-700 leading-tight">
                                        TYPE: STEREO<br/>NR: DOLBY B
                                    </div>
                                    <div className="flex-1">
                                        <SpectrumVisualizer analyser={analyserNode} isPlaying={isPlaying} />
                                    </div>
                                </div>

                                {/* Progress Bar (VISUAL ONLY - NO SLIDER) */}
                                <div className="absolute bottom-0 left-0 w-full h-1.5 bg-[#0f3526]">
                                    <div className="h-full bg-emerald-500 transition-all duration-200 shadow-[0_0_10px_#10b981]" style={{ width: `${progress}%` }}></div>
                                </div>
                            </div>

                            {/* Controls Cluster */}
                            <div className="bg-[#2a2a2a] p-4 rounded-xl shadow-[inset_0_2px_5px_rgba(0,0,0,0.5)] border-t border-white/5 grid grid-cols-1 md:grid-cols-7 gap-4 items-center">
                                
                                {/* Кнопки управления (5 штук в ряд) */}
                                <div className="md:col-span-5 flex items-center justify-between gap-2 px-2">
                                    <ControlButton onClick={handlePrev} title="Previous Track" className="w-12 h-10">
                                        <SkipBack size={18} />
                                    </ControlButton>

                                    {/* Rewind (Real) */}
                                    <ControlButton 
                                        onMouseDown={startRewind} onMouseUp={stopRewind} onMouseLeave={stopRewind}
                                        title="Rewind (Hold)" className="w-12 h-10 active:border-red-900" isActive={seekState === 'rewind'}
                                    >
                                        <RewindIcon size={18} />
                                    </ControlButton>

                                    <ControlButton onClick={togglePlay} isActive={isPlaying} className="w-16 h-14 !rounded-xl !bg-gradient-to-b !from-[#555] !to-[#222]" title="Play / Pause">
                                        {isPlaying ? <Pause size={28} /> : <Play size={28} className="ml-1" />}
                                    </ControlButton>

                                    {/* Fast Forward (Real) */}
                                    <ControlButton 
                                        onMouseDown={startFastForward} onMouseUp={stopFastForward} onMouseLeave={stopFastForward}
                                        title="Fast Forward (Hold)" className="w-12 h-10 active:border-red-900" isActive={seekState === 'forward'}
                                    >
                                        <FastForwardIcon size={18} />
                                    </ControlButton>

                                    <ControlButton onClick={handleNext} title="Next Track" className="w-12 h-10">
                                        <SkipForward size={18} />
                                    </ControlButton>
                                </div>

                                {/* Громкость */}
                                <div className="md:col-span-2 bg-[#1a1a1a] rounded-lg p-3 shadow-[inset_0_2px_5px_black] border border-[#333] flex items-center gap-3">
                                    <Volume2 size={16} className="text-[#555]" />
                                    <input 
                                        type="range" min="0" max="100" value={volume} 
                                        onChange={(e) => setVolume(Number(e.target.value))}
                                        className="w-full h-1.5 bg-[#333] rounded-full appearance-none cursor-pointer accent-orange-500"
                                    />
                                </div>
                            </div>

                        </div>

                        <audio ref={audioRef} className="hidden" crossOrigin="anonymous" />
                    </div>
                    
                    <div className="mt-8 text-[#333] font-mono text-[10px] text-center">
                        <p>DESIGNED FOR SOUP LOVERS • {new Date().getFullYear()}</p>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
